<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>社内図書館システム</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />

    <link rel="stylesheet" href="/resources/style.css" />
  </head>

  <body>
    <!-- ナビバー -->
    <nav class="navbar sticky-top">
      <div
        class="container d-flex flex-wrap justify-content-between align-items-center"
        style="max-width: 1200px; margin: auto"
      >
        <!-- 左側：システム名 -->
        <a
          class="navbar-brand fw-bold text-white"
          href="/resources/toppage.html"
        >
          <i class="bi bi-star-fill text-warning"></i>NSLibrary<i
            class="bi bi-star-fill text-warning"
          ></i>
        </a>

        <!-- 中央：検索フォーム（伸縮対応） -->
        <form
          class="d-flex search-form mx-3"
          role="search"
          action="/resources/booksearch.html"
        >
          <input
            id="searchInput"
            type="text"
            class="form-control me-2"
            placeholder="書籍名・著者名など"
            aria-label="Search"
          />
          <button class="btn btn-outline-light" type="submit">
            <i class="bi bi-search"></i>
          </button>
        </form>

        <!-- 右側：ログインユーザー表示 -->
        <div class="d-flex align-items-center user-info">
          <i class="bi bi-person-circle fs-4 text-white me-2"></i>
          <span class="text-white fw-light">田中 太郎</span>
        </div>
      </div>
    </nav>

    <!-- 検索結果タイトル -->
    <h1 class="text-center mb-4 mt-4">貸出履歴</h1>

    <!-- 検索結果カード -->
    <div class="container">
      <!-- カード -->
      <div
        class="card card-hover mb-4 shadow-sm border-0"
        style="max-width: 1200px; margin: auto"
      >
        <div class="row g-0 align-items-stretch">
          <!-- 画像 -->
          <div
            class="col-md-2 d-flex justify-content-center align-items-center py-2 px-1 border-end"
          >
            <img
              src="/images/book2.png"
              class="img-fluid rounded"
              alt="蔵書画像"
              style="max-height: 100px; width: 75px; height: 100px"
            />
          </div>

          <!-- タイトル -->
          <div
            class="col-md-4 d-flex flex-column justify-content-center p-3 border-end"
          >
            <small class="text-muted fw-semibold">タイトル</small>
            <h5 class="fw-bold text-dark mt-2 text-truncate">
              AWSの仕組み・重要用語がわかる教科書
            </h5>

            <div id="reviewSection" class="d-none">
              <div class="mb-2">
                <span id="stars" class="text-warning"></span>
                <small class="text-muted ms-2" id="difficultyLabel"></small>
              </div>
              <p
                class="mb-0 text-muted"
                style="font-size: 0.9rem"
                id="commentText"
              ></p>
            </div>
          </div>

          <!-- 貸出日 -->
          <div
            class="col-md-2 d-flex flex-column justify-content-center p-3 border-end"
          >
            <small class="text-muted text-center fw-semibold">貸出日</small>
            <h6 class="fw-bold text-primary text-center mt-2 mb-0">
              2025/09/23
            </h6>
            <div id="reviewSection" class="d-none">
              <div class="mb-2">
                <span id="stars" class="text-warning"></span>
                <small class="text-muted ms-2" id="difficultyLabel"></small>
              </div>
              <p
                class="mb-0 text-muted"
                style="font-size: 0.9rem"
                id="commentText"
              ></p>
            </div>
          </div>

          <!-- 返却日 -->
          <div
            class="col-md-2 d-flex flex-column justify-content-center p-3 border-end"
          >
            <small class="text-muted text-center fw-semibold">返却日</small>
            <h6 class="fw-bold text-center mt-2 mb-0">ー</h6>
            <h6 class="fw-bold text-center mt-2 mb-0">（虎ノ門オフィス）</h6>
            <div id="reviewSection" class="d-none">
              <div class="mb-2">
                <span id="stars" class="text-warning"></span>
                <small class="text-muted ms-2" id="difficultyLabel"></small>
              </div>
              <p
                class="mb-0 text-muted"
                style="font-size: 0.9rem"
                id="commentText"
              ></p>
            </div>
          </div>

          <!-- 返却ボタン -->
          <div class="col-md-2 d-flex flex-column justify-content-center p-3">
            <button
              class="btn btn-outline-dark btn-sm mb-2"
              data-bs-toggle="modal"
              data-bs-target="#returnModal"
            >
              返却する
            </button>
          </div>
        </div>
      </div>

      <!-- 1冊分の貸出カード -->
      <div
        class="card mb-4 shadow-lg border-0 rounded-4 overflow-hidden"
        style="max-width: 1200px; margin: auto"
      >
        <div class="row g-0 align-items-center">
          <!-- 画像 -->
          <div
            class="col-md-2 d-flex justify-content-center align-items-center p-3 bg-light"
          >
            <img
              src="/images/book2.png"
              class="img-fluid rounded shadow-sm"
              alt="蔵書画像"
              style="max-height: 110px; width: auto"
            />
          </div>

          <!-- タイトル -->
          <div class="col-md-2 d-flex flex-column justify-content-center p-3">
            <small class="text-muted fw-semibold">タイトル</small>
            <h5 class="fw-bold text-dark mt-2 text-truncate">
              AWSの仕組み・重要用語がわかる教科書
            </h5>
          </div>

          <!-- 貸出日 -->
          <div class="col-md-2 text-center p-3">
            <small class="text-muted fw-semibold">貸出日</small>
            <h6 class="fw-bold text-primary mt-2 mb-0">2025/09/23</h6>
          </div>

          <!-- 返却日 -->
          <div class="col-md-2 text-center p-3">
            <small class="text-muted fw-semibold">返却日</small>
            <h6 class="fw-bold text-danger mt-2 mb-0">未返却</h6>
          </div>

          <!-- 返却場所-->
          <div class="col-md-2 text-center p-3">
            <small class="text-muted fw-semibold">返却場所</small>
            <h6 class="fw-bold text-primary mt-2 mb-0">虎ノ門オフィス</h6>
          </div>

          <!-- 返却ボタン -->
          <div class="col-md-2 d-flex justify-content-center p-3">
            <button
              class="btn btn-dark btn-sm rounded-pill px-4 shadow-sm"
              data-bs-toggle="modal"
              data-bs-target="#returnModal"
            >
              返却する
            </button>
          </div>
        </div>
      </div>

      <!-- モーダル -->
      <div
        class="modal fade"
        id="returnModal"
        tabindex="-1"
        aria-labelledby="returnModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">返却情報を入力</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="閉じる"
              ></button>
            </div>
            <div class="modal-body">
              <!-- 星評価 -->
              <label class="form-label">星評価:</label>
              <select class="form-select mb-3" id="rating">
                <option value="5">★★★★★</option>
                <option value="4">★★★★☆</option>
                <option value="3">★★★☆☆</option>
                <option value="2">★★☆☆☆</option>
                <option value="1">★☆☆☆☆</option>
              </select>

              <!-- 難易度 -->
              <label class="form-label">難易度（1〜100）:</label>
              <input
                type="number"
                class="form-control mb-3"
                id="difficulty"
                min="1"
                max="100"
              />

              <!-- コメント -->
              <label class="form-label">コメント（任意）:</label>
              <textarea class="form-control" id="comment" rows="3"></textarea>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                キャンセル
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="submitReturn()"
              >
                確定する
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- JavaScript -->
      <script>
        function submitReturn() {
          const rating = document.getElementById("rating").value;
          const difficulty = document.getElementById("difficulty").value;
          const comment = document.getElementById("comment").value;

          // 星表示
          const stars = "★".repeat(rating) + "☆".repeat(5 - rating);
          document.getElementById("stars").textContent = stars;

          // 難易度表示
          document.getElementById(
            "difficultyLabel"
          ).textContent = `難易度: ${difficulty}/100`;

          // コメント表示
          document.getElementById("commentText").textContent =
            comment || "（コメントなし）";

          // 返却日表示
          document.getElementById("returnDate").classList.remove("d-none");

          // レビューセクション表示
          document.getElementById("reviewSection").classList.remove("d-none");

          // ボタンを返却済みに変更
          const button = document.querySelector(
            '[data-bs-target="#returnModal"]'
          );
          button.outerHTML = '<span class="badge bg-dark mb-2">返却済</span>';

          // モーダルを閉じる
          const modal = bootstrap.Modal.getInstance(
            document.getElementById("returnModal")
          );
          modal.hide();
        }
      </script>

      <div
        class="card card-hover mb-4 shadow-sm border-0"
        style="max-width: 1200px; margin: auto"
      >
        <a href="book2Detail.html" class="stretched-link"></a>
        <div class="row g-0 align-items-stretch">
          <!-- 画像ブロック（2割） -->
          <div
            class="col-md-3 d-flex justify-content-center align-items-center py-2 px-1 border-end"
          >
            <img
              src="/images/book2.png"
              class="img-fluid rounded"
              alt="蔵書画像"
              style="max-height: 100px; width: 75px; height: 100px"
            />
          </div>

          <!-- タイトル・評価・あらましブロック（6割） -->
          <div
            class="col-md-6 d-flex flex-column justify-content-center p-3 border-end"
          >
            <h5 class="fw-bold mb-2">AWSの仕組み・重要用語がわかる教科書</h5>
            <div class="mb-2">
              <span class="text-warning">★ ★ ★ ★ ☆</span>
              <small class="text-muted ms-2">4.0 / 5</small>
            </div>
            <p class="mb-0 text-muted" style="font-size: 0.9rem">
              AWSの基本がとても分かりやすく整理されていて、初心者にもおすすめです。
            </p>
          </div>

          <!-- 貸出状況・履歴ブロック（2割） -->
          <div class="col-md-3 d-flex flex-column justify-content-center p-3">
            <span class="badge bg-dark mb-2">返却済</span>
            <ul class="list-unstyled mb-0" style="font-size: 0.85rem">
              <li><strong>借りた日:</strong> 2025年8月25日</li>
              <li><strong>返却日:</strong> 2025年9月1日</li>
              <li><strong>返却場所:</strong> 千代田図書館</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- カード -->
      <div
        class="card card-hover mb-4 shadow-sm border-0"
        style="max-width: 1200px; margin: auto"
      >
        <a href="book2Detail.html" class="stretched-link"></a>
        <div class="row g-0 align-items-stretch">
          <!-- 画像 -->
          <div
            class="col-md-3 d-flex justify-content-center align-items-center py-2 px-1 border-end"
          >
            <img
              src="/images/book2.png"
              class="img-fluid rounded"
              alt="蔵書画像"
              style="max-height: 100px; width: 75px; height: 100px"
            />
          </div>

          <!-- タイトル・評価・あらまし -->
          <div
            class="col-md-6 d-flex flex-column justify-content-center p-3 border-end"
          >
            <h5 class="fw-bold mb-2">AWSの仕組み・重要用語がわかる教科書</h5>
            <div id="reviewSection" class="d-none">
              <div class="mb-2">
                <span id="stars" class="text-warning"></span>
                <small class="text-muted ms-2" id="difficultyLabel"></small>
              </div>
              <p
                class="mb-0 text-muted"
                style="font-size: 0.9rem"
                id="commentText"
              ></p>
            </div>
          </div>

          <!-- 貸出状況 -->
          <div class="col-md-3 d-flex flex-column justify-content-center p-3">
            <button
              class="btn btn-outline-dark btn-sm mb-2"
              data-bs-toggle="modal"
              data-bs-target="#returnModal"
            >
              返却する
            </button>
            <ul class="list-unstyled mb-0" style="font-size: 0.85rem">
              <li><strong>借りた日:</strong> 2025年8月25日</li>
              <li><strong>返却場所:</strong> 千代田図書館</li>
              <li id="returnDate" class="d-none">
                <strong>返却日:</strong> 2025年9月1日
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- モーダル -->
      <div
        class="modal fade"
        id="returnModal"
        tabindex="-1"
        aria-labelledby="returnModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">返却情報を入力</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="閉じる"
              ></button>
            </div>
            <div class="modal-body">
              <!-- 星評価 -->
              <label class="form-label">星評価:</label>
              <select class="form-select mb-3" id="rating">
                <option value="5">★★★★★</option>
                <option value="4">★★★★☆</option>
                <option value="3">★★★☆☆</option>
                <option value="2">★★☆☆☆</option>
                <option value="1">★☆☆☆☆</option>
              </select>

              <!-- 難易度 -->
              <label class="form-label">難易度（1〜100）:</label>
              <input
                type="number"
                class="form-control mb-3"
                id="difficulty"
                min="1"
                max="100"
              />

              <!-- コメント -->
              <label class="form-label">コメント（任意）:</label>
              <textarea class="form-control" id="comment" rows="3"></textarea>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                キャンセル
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="submitReturn()"
              >
                確定する
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- JavaScript -->
      <script>
        function submitReturn() {
          const rating = document.getElementById("rating").value;
          const difficulty = document.getElementById("difficulty").value;
          const comment = document.getElementById("comment").value;

          // 星表示
          const stars = "★".repeat(rating) + "☆".repeat(5 - rating);
          document.getElementById("stars").textContent = stars;

          // 難易度表示
          document.getElementById(
            "difficultyLabel"
          ).textContent = `難易度: ${difficulty}/100`;

          // コメント表示
          document.getElementById("commentText").textContent =
            comment || "（コメントなし）";

          // 返却日表示
          document.getElementById("returnDate").classList.remove("d-none");

          // レビューセクション表示
          document.getElementById("reviewSection").classList.remove("d-none");

          // ボタンを返却済みに変更
          const button = document.querySelector(
            '[data-bs-target="#returnModal"]'
          );
          button.outerHTML = '<span class="badge bg-dark mb-2">返却済</span>';

          // モーダルを閉じる
          const modal = bootstrap.Modal.getInstance(
            document.getElementById("returnModal")
          );
          modal.hide();
        }
      </script>

      <div
        class="card card-hover mb-4 shadow-sm border-0"
        style="max-width: 1200px; margin: auto"
      >
        <div class="row g-0 align-items-stretch">
          <!-- 画像ブロック -->
          <div
            class="col-md-3 d-flex justify-content-center align-items-center py-2 px-1 border-end"
          >
            <img
              src="/images/book2.png"
              class="img-fluid rounded"
              alt="蔵書画像"
              style="max-height: 100px; width: 75px; height: 100px"
            />
          </div>

          <!-- タイトル・評価・あらましブロック -->
          <div
            class="col-md-6 d-flex flex-column justify-content-center p-3 border-end"
          >
            <h5 class="fw-bold mb-2">AWSの仕組み・重要用語がわかる教科書</h5>
            <div id="reviewSection" class="d-none">
              <div class="mb-2">
                <span class="text-warning">★ ★ ★ ★ ☆</span>
                <small class="text-muted ms-2">4.0 / 5</small>
              </div>
              <p class="mb-0 text-muted" style="font-size: 0.9rem">
                AWSの基本がとても分かりやすく整理されていて、初心者にもおすすめです。
              </p>
            </div>
          </div>

          <!-- 貸出状況・返却ボタンブロック -->
          <div class="col-md-3 d-flex flex-column justify-content-center p-3">
            <div id="statusSection">
              <button
                class="btn btn-outline-primary btn-sm"
                onclick="handleReturn()"
              >
                返却する
              </button>
            </div>
            <ul
              id="returnInfo"
              class="list-unstyled mt-2 d-none"
              style="font-size: 0.85rem"
            >
              <li><strong>返却日:</strong> 2025年9月1日</li>
              <li><strong>返却場所:</strong> 千代田図書館</li>
            </ul>
          </div>
        </div>
      </div>

      <script>
        function handleReturn() {
          // ボタンを返却済みに変更
          const statusSection = document.getElementById("statusSection");
          statusSection.innerHTML = '<span class="badge bg-dark">返却済</span>';

          // 返却情報とレビューを表示
          document.getElementById("returnInfo").classList.remove("d-none");
          document.getElementById("reviewSection").classList.remove("d-none");
        }
      </script>

      <!-- カード1 -->
      <div
        class="card card-hover mb-4 shadow-sm border-0"
        style="max-width: 1200px; max-height: 200px; margin: auto"
      >
        <a href="book1Detail.html" class="stretched-link"></a>
        <div class="row g-0 align-items-stretch">
          <!-- 画像ブロック（2割） -->
          <div
            class="col-md-3 d-flex justify-content-center align-items-center py-2 px-1 border-end"
          >
            <img
              src="/images/book1.png"
              class="img-fluid rounded"
              alt="蔵書画像"
              style="
                max-height: 100px;
                max-width: 100%;
                width: 75px;
                height: 100px;
              "
            />
          </div>

          <!-- タイトル・評価・あらましブロック（6割） -->
          <div
            class="col-md-6 d-flex flex-column justify-content-center p-3 border-end"
          >
            <h5 class="fw-bold mb-2">
              図解 AWSの仕組みとサービスがよくわかる！
            </h5>
          </div>

          <!-- 貸出状況ブロック（2割） -->
          <div class="col-md-3 d-flex flex-column justify-content-center p-3">
            <span class="badge bg-primary badge-fixed">返却する</span>
          </div>
        </div>
      </div>

      <!-- カード2 -->
      <div
        class="card card-hover mb-4 shadow-sm border-0"
        style="max-width: 1200px; max-height: 200px; margin: auto"
      >
        <a href="book2Detail.html" class="stretched-link"></a>
        <div class="row g-0 align-items-stretch">
          <!-- 画像ブロック（2割） -->
          <div
            class="col-md-3 d-flex justify-content-center align-items-center py-2 px-1 border-end"
          >
            <img
              src="/images/book2.png"
              class="img-fluid rounded"
              alt="蔵書画像"
              style="
                max-height: 100px;
                max-width: 100%;
                width: 75px;
                height: 100px;
              "
            />
          </div>

          <!-- タイトル・評価・あらましブロック（6割） -->
          <div
            class="col-md-6 d-flex flex-column justify-content-center p-3 border-end"
          >
            <h5 class="fw-bold mb-2">AWSの仕組み・重要用語がわかる教科書</h5>
          </div>

          <!-- 貸出状況ブロック（2割） -->
          <div class="col-md-3 d-flex flex-column justify-content-center p-3">
            <span class="badge bg-dark badge-fixed">返却済</span>
          </div>
        </div>
      </div>
    </div>

    <nav>
      <ul class="pagination justify-content-center">
        <li class="page-item disabled">
          <a class="page-link" href="#" tabindex="-1">前へ</a>
        </li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item disabled">
          <a class="page-link" href="#">...</a>
        </li>
        <li class="page-item"><a class="page-link" href="#">6</a></li>
        <li class="page-item">
          <a class="page-link" href="#">次へ</a>
        </li>
      </ul>
    </nav>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
